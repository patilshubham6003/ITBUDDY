<div nz-row nzType="flex">
  <div nz-col nzXs="24" nzSm="24" nzMd="20" nzLg="20" nzXl="12" nzSpan="12">
    <div class="formname">{{ formTitle }}</div>
  </div>

  <div nz-col nzXs="24" nzSm="24" nzMd="4" nzLg="4" nzXl="12">
    <div style="display: flex; justify-content: flex-end; align-items: center">
      <button
        nz-button
        nz-tooltip
        nzTooltipTitle="Excel"
        nzTooltipPlacement="top"
        (click)="importInExcel()"
        nzType="primary"
        style="margin-right: 10px"
      >
        <i nz-icon nzType="file-excel" nzTheme="outline"></i>
      </button>

      <button nz-button nzTooltipTitle="Filter" [nzType]="isFilterApplied" nzTooltipPlacement="top" nz-tooltip (click)="showFilter()">
        <i nz-icon nzType="filter"></i>
      </button>
  

      <form nz-form [nzLayout]="'inline'">
        <nz-form-item class="Changeformitm">
          <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
            <input
              type="text"
              name="webbannersearch"
              (keyup)="keyup($event)"
              [(ngModel)]="searchText"
              nz-input
              placeholder="Search"
            />
          </nz-input-group>
          <ng-template #suffixIconButton>
            <button nz-button nzType="primary" (click)="search()" nzSearch>
              <i nz-icon nzType="search"></i>
            </button>
          </ng-template>
        </nz-form-item>
      </form>
    </div>
  </div>
</div>

<div nz-row>
  <div nz-col nzSpan="24">
    <div class="filter {{ filterClass }}">
      <div class="filter-box">
        <form nz-form>
          <div nz-row>
            <div nz-col nzSpan="4">
              <nz-form-item class="Changeformitm">
                <nz-form-label nzNoColon nzRequired>Select Month</nz-form-label>
                <nz-form-control nzErrorTip="Please Select Month">
                  <nz-date-picker
                    nzMode="month"
                    nzPlaceholder="Please select Month"
                    nzFormat="MMM"
                    name="month"
                    [(ngModel)]="selectmonth"
                    (ngModelChange)="onChangemonth($event)"
                  ></nz-date-picker>
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzSpan="4">
              <nz-form-item class="Changeformitm">
                <nz-form-label nzNoColon nzRequired>Select Year</nz-form-label>
                <nz-form-control>
                  <nz-date-picker
                    nzMode="year"
                    name="year"
                    [(ngModel)]="selectyear"
                    nzPlaceholder="Please Select Year"
                    nzFormat="yyyy"
                    (ngModelChange)="onChangeyear($event)"
                  ></nz-date-picker>
                </nz-form-control>
              </nz-form-item>
            </div>

            <div nz-col nzSpan="6">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon
                  >Residance Type</nz-form-label
                >
                <nz-form-control nzHasFeedback>
                  <nz-select
                    [(ngModel)]="RESIDENCE_TYPE_ID"
                    name="RESIDENCE_TYPE_ID"
                    style="width: 100%"
                    nzShowSearch
                    nzAllowClear
                   
                    nzAllowClea
                    nzPlaceHolder="Select Residance Type"
                  >
                    <nz-option
                      *ngFor="let Residance of ResidenceTypelist"
                      [nzValue]="Residance.ID"
                      [nzLabel]="Residance.TYPE"
                    ></nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>

            <div nz-col nzSpan="6">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Pay Level</nz-form-label>
                <nz-form-control nzHasFeedback>
                  <nz-select
                    [(ngModel)]="GRADE_PAY_LEVEL"
                    name="GRADE_PAY_LEVEL  "
                    style="width: 100%"
                    nzShowSearch
                    nzAllowClear
                   
                    nzAllowClea
                    nzPlaceHolder="Select Grade pay level"
                  >
                    <nz-option
                      *ngFor="let pay of GradPay"
                      [nzValue]="pay.GRADE_PAY_LEVEL"
                      [nzLabel]="pay.GRADE_PAY_LEVEL"
                    ></nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>

            <div nz-col nzSpan="6">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon>Caste</nz-form-label>
                <nz-form-control>
                  <nz-select
                    name="CAST"
                    [(ngModel)]="CAST"
                    nzAllowClear
                    nzShowSearch
                    nzPlaceHolder="Select Caste"
                    (ngModelChange)="changecast($event)"
                  >
                    <nz-option
                      [nzValue]="'SC'"
                      [nzLabel]="'Scheduled Caste'"
                    ></nz-option>
                    <nz-option
                      [nzValue]="'ST'"
                      [nzLabel]="'Scheduled Tribes'"
                    ></nz-option>
                    <nz-option
                      [nzValue]="'GN'"
                      [nzLabel]="'General'"
                    ></nz-option>
                    <nz-option
                      [nzValue]="'Other'"
                      [nzLabel]="'Other'"
                    ></nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>

            <div
              nz-col
              nzSpan="8"
              style="display: flex; gap: 10px; margin-top: 31px"
            >
              <button
                nz-button
                [nzLoading]="isSpinning"
                nzType="primary"
                class="flexicons"
                (click)="applyFilter()"
              >
                <i nz-icon nzType="filter"></i>Apply Filter
              </button>
              <button
                nz-button
                nzType="primary"
                class="flexicons"
                [nzLoading]="isSpinning"
                (click)="clearFilter()"
              >
                <i nz-icon nzType="close"></i>Clear filter
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div nz-row>
  <div nz-col nzSpan="24">
    <nz-table
      class="my-scroll no-wrap1"
      id="data_List"
      nzBordered
      #table
      nzShowSizeChanger
      [nzFrontPagination]="false"
      [nzData]="dataList"
      [nzLoading]="loadingRecords"
      [nzSize]="'small'"
      [nzTotal]="totalRecords"
      [nzScroll]="{ y: '400px' }"
      [(nzPageIndex)]="pageIndex"
      [(nzPageSize)]="pageSize"
      (nzPageIndexChange)="search()"
      (nzPageSizeChange)="search(true)"
      (nzQueryParams)="sort($event)"
    >
      <thead>
        <tr>
          <th
            nzColumnKey="{{ 'MONTH' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Month
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Year
          </th>

          <th
            nzColumnKey="{{ 'RESIDENCE_TYPE' }}"
            nzWidth="180px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Residance Type
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="160px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Name
          </th>

          <!-- <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Date of Priority
          </th> -->

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Designation
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Pay Level
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="160px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Date Of Joining
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="160px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Date Of Retirement
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="160px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Date Of Birth
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Caste
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 1
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 2
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 3
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 4
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 5
          </th>

          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 6
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 7
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 8
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 9
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 10
          </th>


          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 11
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 12
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 13
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 14
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 15
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 16
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 17
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 18
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 19
          </th>
          <th
            nzColumnKey="{{ 'YEAR' }}"
            nzWidth="130px"
            [nzSortFn]="true"
            style="font-weight: bold; text-align: center"
          >
            Preference 20
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of table.data">
          <td style="text-align: center; white-space: pre-line">
            <span *ngIf="data['MONTH'] == 1"> January </span>
            <span *ngIf="data['MONTH'] == 2"> February </span>
            <span *ngIf="data['MONTH'] == 3"> March </span>
            <span *ngIf="data['MONTH'] == 4"> April </span>
            <span *ngIf="data['MONTH'] == 5"> May </span>
            <span *ngIf="data['MONTH'] == 6"> June </span>
            <span *ngIf="data['MONTH'] == 7"> July </span>
            <span *ngIf="data['MONTH'] == 8"> August </span>
            <span *ngIf="data['MONTH'] == 9"> September </span>
            <span *ngIf="data['MONTH'] == 10"> October</span>
            <span *ngIf="data['MONTH'] == 11"> November</span>
            <span *ngIf="data['MONTH'] == 12"> December</span>
          </td>

          <td style="text-align: center; white-space: pre-line">
            {{ data["YEAR"]}}
          </td>
          <td style="text-align: center; white-space: pre-line">
            {{ data["RESIDENCE_TYPE_NAME"] }}
          </td>
          <td style="text-align: center; white-space: pre-line">
            {{ data["EMPLOYEE_NAME"] }}
          </td>
          <!-- <td style="text-align: center; white-space: pre-line"></td> -->

          <td style="text-align: center; white-space: pre-line">
            {{ data["DESIGNATION"] }}
          </td>
          <!-- {{data['']}} -->
          <td style="text-align: center; white-space: pre-line">
            {{ data["GRADE_PAY_LEVEL"] }}
          </td>
          <td style="text-align: center; white-space: pre-line">
            {{ data.JOINING_DATE  | date : "dd-MM-yyyy" }}
          </td>

          <td style="text-align: center; white-space: pre-line">
            {{ data.RETIREMENT_DATE| date :"dd-MM-yyyy"}}
          </td>
   
          <td style="text-align: center; white-space: pre-line">
            {{ data.DOB | date :"dd-MM-yyyy"}}
          </td>
          <td style="text-align: center; white-space: pre-line">
            <span *ngIf="data.CAST == 'SC'">Scheduled Caste</span>
            <span *ngIf="data.CAST == 'ST'">Scheduled Tribes</span>
            <span *ngIf="data.CAST == 'Other'">Other</span>
            <span *ngIf="data.CAST == 'GN'">General</span>
          </td>

          <td *ngFor="let pref of data['PREFERENCES']" nzWidth="100px" style="white-space: pre-line; text-align: center">
            <span>{{ pref.FLAT_NAME }}</span>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
</div>
