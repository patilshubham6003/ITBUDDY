<nz-modal [(nzVisible)]="caretakervacationmodal" [nzWidth]="1000"
    [nzBodyStyle]="{ height: '400px', overflow: 'auto', padding: '20px' }" nzMaskClosable="false" nzClosable="true"
    nzTitle="Surrender Form" [nzFooter]="FooterClosee" (nzOnCancel)="cancelcaretakervacationmodal()"
    nzOkText="View PDF">
    <ng-container *nzModalContent>
        <div nz-row class="my-box">
            <div nz-col nzSpan="24">
                <div id="printpageform1">
                    <div nz-row>
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin: 25px 0px;page-break-inside: avoid;">
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8" style="text-align: center;">
                                    <div>Place: Mumbai</div>
                                    <div>Date: {{todaysdate | date:'dd/MM/yyyy'}}</div>
                                </div>
                            </div>
                            <div nz-row style="margin: 25px 0px;">
                                <div nz-col nzSpan="8">
                                    <div style="padding: 2px 15px">To</div>
                                    <div style="padding: 2px 15px">The ITO (HQ),
                                        Admin-II,</div>
                                    <div style="padding: 2px 15px">Aaykar Bhawan,</div>
                                    <div style="padding: 2px 15px">Mumbai.</div>
                                </div>
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8"></div>
                            </div>
                            <div nz-row style="margin: 25px 0px;">
                                <div nz-col nzSpan="8">
                                    <div style="padding: 2px 15px">Sir,</div>
                                </div>
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8"></div>
                            </div>
                            <div nz-row style="margin: 20px 0px;">
                                <div nz-col nzSpan="1"></div>
                                <div nz-col nzSpan="22" style="text-align: justify;">
                                    <div style="font-size: 14px;padding: 0px 30px" *ngIf="dataass!=undefined">
                                        <b>Subject:
                                            Regarding surrender of allotted {{dataass.RESIDENCE_TYPE_NAME}}
                                            Quarter
                                            [{{dataass.BUILDING_NAME}}/{{dataass.FLAT_NAME}}/{{dataass.FLAT_NAME}}]-reg.</b>
                                    </div>
                                </div>
                                <div nz-col nzSpan="1"></div>
                            </div>
                            <div nz-row style="margin: 20px 0px;">
                                <div nz-col nzSpan="1"></div>
                                <div nz-col nzSpan="22" style="text-align: justify;">
                                    <div style="text-indent: 30px;padding: 0px 30px">
                                        Kindly refer to the above.
                                    </div>
                                </div>
                                <div nz-col nzSpan="1"></div>
                            </div>
                            <div nz-row style="margin: 20px 0px;">
                                <div nz-col nzSpan="1"></div>
                                <div nz-col nzSpan="22" style="text-align: justify;">
                                    <div style="text-indent: 30px;padding: 0px 30px;line-height: 30px;"
                                        [innerHTML]="sampletext">
                                    </div>
                                    <br>
                                    <div style="padding: 0px 30px">
                                        Thanking You,
                                    </div>
                                </div>
                                <div nz-col nzSpan="1"></div>
                            </div>
                            <div nz-row style="margin: 25px 0px;page-break-inside: avoid;">
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8" style="text-align: center;">Yours
                                    faithfully,</div>
                            </div>
                            <div nz-row style="margin: 15px 0px; page-break-inside: avoid;">
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8"></div>
                                <div nz-col nzSpan="8" style="text-align: center;">
                                    <div style="padding: 2px 10px" *ngIf="dataass!=undefined">({{dataass.EMPLOYEE_NAME |
                                        uppercase}})</div>
                                    <div style="padding: 2px 10px" *ngIf="dataass!=undefined">Employee ID -
                                        {{dataass.EMPLOYEE_CODE}}</div>
                                    <div style="padding: 2px 10px" *ngIf="dataass!=undefined">Designation -
                                        {{dataass.DESIGNATION}} {{dataass.DDO_OF_THE_OFFICIAL}}</div>
                                    <div style="padding: 2px 10px" *ngIf="dataass!=undefined">Contact:
                                        {{dataass.MOBILE_NO}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-template #FooterClosee>
        <button nz-button nzType="default" (click)="cancelcaretakervacationmodal()"
            style="margin-right: 8px;">Close</button>
        <button nz-button nzType="primary" [nzLoading]="pdfDownloaddraft" (click)="downloadPdfdraft()">
            Download
        </button>
        <button nz-button nzType="primary" printSectionId="printpageform1" ngxPrint [useExistingCss]="true"
            style="margin-right: 8px; color: white !important">
            Print
        </button>
    </ng-template>
</nz-modal>

<div class="header">
    <button nz-button (click)="close()">
        <span nz-icon nzType="close" nzTheme="outline"></span>
    </button>
</div>
<div nz-row nzSpan="24" style="padding: 0px">
    <div nz-col nzSpan="6">
        <nz-steps [nzCurrent]="stage" nzDirection="vertical" nzSize="small">
            <nz-step [nzTitle]="Applicat" [nzDescription]="desctemp"> </nz-step>
            <ng-template #desctemp>
                <p style="font-size: 10px; margin-top: 10px" *ngIf="data!=undefined">
                    {{data.SURRENDER_PRINT_DATE_TIME | date : "dd/MM/yyyy HH:mm:ss"}}
                </p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
            </ng-template>
            <ng-template #Applicat>
                <span style="font-size: 11px; font-weight: 600">Print Form</span>
            </ng-template>
            <nz-step [nzTitle]="Application" [nzDescription]="desctapplication">
            </nz-step>
            <ng-template #desctapplication>
                <p style="font-size: 10px; margin-top: 10px" *ngIf="data!=undefined">
                    {{data.SURRENDER_FORM_SUBMITTED_DATE_TIME | date : "dd/MM/yyyy HH:mm:ss"}}
                </p>
                <p></p>
                <p></p>
                <p></p>
            </ng-template>
            <ng-template #Application>
                <span style="font-size: 11px; font-weight: 600">Upload & Submit</span>
            </ng-template>
        </nz-steps>
    </div>
    <div nz-col nzSpan="18" style="max-height: 80vh; overflow-y: auto; overflow-x: hidden">
        <nz-card>
            <form *ngIf="stage == 0">
                <nz-spin [nzSpinning]="isSpinning">
                    <div nz-row>
                        <div nz-col nzSpan="24">
                            <h4 style="text-align: center; font-size: 15px">
                                Print Surrender Form
                            </h4>
                            <p style="text-align: center; margin-bottom: 10px;font-size: 13px;">
                                Please review all the information displayed below for accuracy. Once
                                verified, you can proceed to print out the surrender form for the
                                next steps in the process.
                            </p>
                            <div id="printpageform">
                                <div nz-row>
                                    <div nz-col nzSpan="24">
                                        <div nz-row style="margin: 25px 0px;page-break-inside: avoid;">
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8" style="text-align: center;">
                                                <div>Place: Mumbai</div>
                                                <div>Date: {{todaysdate | date:'dd/MM/yyyy'}}</div>
                                            </div>
                                        </div>
                                        <div nz-row style="margin: 25px 0px;">
                                            <div nz-col nzSpan="8">
                                                <div style="padding: 2px 15px">To</div>
                                                <div style="padding: 2px 15px">The ITO (HQ),
                                                    Admin-II,</div>
                                                <div style="padding: 2px 15px">Aaykar Bhawan,</div>
                                                <div style="padding: 2px 15px">Mumbai.</div>
                                            </div>
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8"></div>
                                        </div>
                                        <div nz-row style="margin: 25px 0px;">
                                            <div nz-col nzSpan="8">
                                                <div style="padding: 2px 15px">Sir,</div>
                                            </div>
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8"></div>
                                        </div>
                                        <div nz-row style="margin: 20px 0px;">
                                            <div nz-col nzSpan="1"></div>
                                            <div nz-col nzSpan="22" style="text-align: justify;">
                                                <div style="font-size: 14px;padding: 0px 30px"
                                                    *ngIf="dataass!=undefined"><b>Subject:
                                                        Regarding surrender of allotted {{dataass.RESIDENCE_TYPE_NAME}}
                                                        Quarter
                                                        [{{dataass.BUILDING_NAME}}/{{dataass.FLAT_NAME}}/{{dataass.FLAT_NAME}}]-reg.</b>
                                                </div>
                                            </div>
                                            <div nz-col nzSpan="1"></div>
                                        </div>
                                        <div nz-row style="margin: 20px 0px;">
                                            <div nz-col nzSpan="1"></div>
                                            <div nz-col nzSpan="22" style="text-align: justify;">
                                                <div style="text-indent: 30px;padding: 0px 30px">
                                                    Kindly refer to the above.
                                                </div>
                                            </div>
                                            <div nz-col nzSpan="1"></div>
                                        </div>
                                        <div nz-row style="margin: 20px 0px;">
                                            <div nz-col nzSpan="1"></div>
                                            <div nz-col nzSpan="22" style="text-align: justify;">
                                                <div style="padding: 0px 20px;line-height: 24px;">
                                                    <angular-editor [config]="editorConfig" name="titledite"
                                                        placeholder="Type your message here"
                                                        [(ngModel)]="sampletext"></angular-editor>
                                                </div>
                                                <br>
                                                <div style="padding: 0px 30px">
                                                    Thanking You,
                                                </div>
                                            </div>
                                            <div nz-col nzSpan="1"></div>
                                        </div>

                                        <div nz-row style="margin: 25px 0px;page-break-inside: avoid;">
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8" style="text-align: center;">Yours
                                                faithfully,</div>
                                        </div>
                                        <div nz-row style="margin: 15px 0px; page-break-inside: avoid;">
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8"></div>
                                            <div nz-col nzSpan="8" style="text-align: center;">
                                                <div style="padding: 2px 10px" *ngIf="dataass!=undefined">
                                                    ({{dataass.EMPLOYEE_NAME | uppercase}})</div>
                                                <div style="padding: 2px 10px" *ngIf="dataass!=undefined">Employee ID -
                                                    {{dataass.EMPLOYEE_CODE}}</div>
                                                <div style="padding: 2px 10px" *ngIf="dataass!=undefined">Designation -
                                                    {{dataass.DESIGNATION}} {{dataass.DDO_OF_THE_OFFICIAL}}</div>
                                                <div style="padding: 2px 10px" *ngIf="dataass!=undefined">Contact:
                                                    {{dataass.MOBILE_NO}}</div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nz-spin>
            </form>

            <form *ngIf="stage == 1">
                <!-- <nz-spin [nzSpinning]="savenextapp"> -->
                <h4 style="text-align: center; font-size: 15px">
                    Upload the Signed Copy of Form
                </h4>
                <p style="text-align: center; margin-bottom: 10px;font-size: 13px;">
                    Kindly upload the signed copy of the form that was printed in the
                    last stage and submit your form.
                </p>
                <div nz-row style="display: flex; justify-content: center; align-items: center">
                    <div nz-col nzSpan="6" style="margin-top: 40px"></div>
                    <div nz-col nzSpan="12" style="text-align: center; margin-top: 10px">
                        <nz-form-item>
                            <nz-form-label class="labelsize" nzRequired nzNoColon>Upload Surrender Form</nz-form-label>
                            <nz-form-control nzHasFeedback nzErrorTip="PDF File is required"
                                *ngIf="data!=undefined && data.SURRENDER_FORM == null">
                                <button nz-button style="font-size: 11px;" nzSize="small" [nzLoading]="subsurforms"
                                    (click)="Applicationform.click()">
                                    Select File
                                    <input #Applicationform name="SURRENDER_FORM" type="file" accept="application/pdf"
                                        (change)="onFileApplicationform($event)" style="display: none" required />
                                </button>
                            </nz-form-control>

                            <div *ngIf="data!=undefined && data.SURRENDER_FORM != null" style="
                          overflow: hidden;
                          font-size: 11px;
                          display: block;
                          width: 100%;
                          color: #1890ff;
                        ">
                                {{ data.SURRENDER_FORM }} &nbsp;&nbsp;&nbsp;
                                <span nz-icon nzTooltipTitle="Preview" nzTooltipPlacement="top" nz-tooltip nzType="eye"
                                    nzTheme="outline" style="cursor: pointer; color: #1890ff"
                                    (click)="applnformshow(data.SURRENDER_FORM)"></span>&nbsp;&nbsp;&nbsp;
                                <span nz-icon nzType="delete" nzTheme="outline" nzTooltipTitle="Remove"
                                    nzTooltipPlacement="top" nz-tooltip style="cursor: pointer; color: red"
                                    (click)="clearapplnform(data.SURRENDER_FORM,'surrenderForm')"></span>
                            </div>
                        </nz-form-item>
                        <div *ngIf="progressBar">
                            <nz-progress [style.width]="percent + '%'" [nzPercent]="percent">{{ percent
                                }}%</nz-progress>
                        </div>
                    </div>
                    <div nz-col nzSpan="6" style="margin-top: 40px"></div>

                    <div nz-col nzSpan="24" style="margin-top: 40px;font-size: 11px;">
                        <input id="agrrrr" type="checkbox" class="form-check-input" name="agrrrr"
                            (click)="agrreconfirmation1()" style="cursor: pointer; border: 2px solid #415be2" />&nbsp;
                        By clicking Send for Verification, I agree to
                        the
                        <a style="color: #006699" data-bs-dismiss="modal">Terms & Conditions</a>
                    </div>
                </div>
                <!-- </nz-spin> -->
            </form>
        </nz-card>
    </div>

    <div class="footer">
        <button type="button" nz-button nzSize="small" class="ant-btn" style="margin-right: 8px;font-size: 11px;"
            (click)="close()" [nzLoading]="submitapplnon">
            <span>Cancel</span>
        </button>
        <button type="button" nz-button nzSize="small" class="ant-btn" [disabled]="disableprevious"
            style="margin-right: 8px;font-size: 11px;" (click)="previous2()" [nzLoading]="submitapplnon"
            *ngIf="stage != 0 && stage == 1">
            <span>Previous</span>
        </button>
        <button *ngIf="stage == 0 && sampletext.length>0" nzSize="small" nz-button
            style="margin-right: 8px;font-size: 11px;" nzType="primary" (click)="opencaretakervacationmodal()"
            [nzLoading]="savenextapp">
            Preview
        </button>
        <button type="button" [nzLoading]="savenextapp" nzSize="small" *ngIf="stage == 0 " style="font-size: 11px;"
            class="ant-btn ant-btn-primary" [disabled]="disablenext" nz-button (click)="nextUpload()">
            <span>Save & Next</span>
        </button>
        <button type="button" [nzLoading]="submitapplnon" nzSize="small" *ngIf="stage == 1" style="font-size: 11px;"
            class="ant-btn ant-btn-primary" [disabled]="disablenext" nz-button (click)="handleOkform()">
            <span>Submit</span>
        </button>
    </div>
</div>

<nz-modal [(nzVisible)]="Rulesandapply" nzCentered="true" [nzBodyStyle]="{ padding: '16px' }" nzWidth="570px"
    nzClosable="false" [nzFooter]="contextofrules" nzMaskClosable="false">
    <ng-container *nzModalContent>
        <h5 style="font-size: 15px;">Confirmation</h5>
        <hr style="margin: 8px 0" />
        <p style="font-size: 13px; margin-bottom: 10px">
            Are you sure want to submit your Surrender form for verification?
        </p>
        <p style="font-size: 11px; margin-bottom: 0px">
            By clicking <b>Send for Verification</b> , you acknowledge that the
            information provided in your Surrender form is accurate and complete. Once
            submitted, you may not be able to make further changes until the
            verification process gets completed.
        </p>
    </ng-container>

    <ng-template #contextofrules>
        <button nz-button nzType="primary" nzSize="small" class="btn btn-primary"
            style="background-color: #006699;font-size: 11px;" (click)="Submitapplication()"
            [nzLoading]="submitapplnon">
            Send For Verification
        </button>
        <button nz-button nzType="primary" nzSize="small" class="btn btn-primary"
            style="background-color: #006699;font-size: 11px;" (click)="cancelappliactionform()"
            [nzLoading]="submitapplnon">
            Cancel
        </button>
    </ng-template>
</nz-modal>