<div nz-row>
  <div nz-col nzLg="11" nzMd="24" nzSm="24" nzXs="24">
    <div nz-row class="status-search-container">
      <div
        nz-col
        nzXs="24"
        nzSm="24"
        nzMd="12"
        nzLg="12"
        class="status-col"
        style="text-align: left"
      >
        <div style="padding-left: 10px" class="status-text-wrapper">
          <span *ngIf="selectedPincode.length > 0">
            {{ selectedPincode.length }} records selected out of
            {{ unMapCategoriesData.length }}</span
          >
          <span *ngIf="selectedPincode.length == 0"
            >Total Records {{ unMapCategoriesData.length }}</span
          >
        </div>
      </div>

      <div
        nz-col
        nzXs="24"
        nzSm="24"
        nzMd="12"
        nzLg="12"
        class="search-col"
        style="text-align: right"
      >
        <form nz-form [nzLayout]="'inline'" style="display: inline-flex">
          <nz-form-item>
            <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
              <input
                type="text"
                name="pincodesearch"
                [(ngModel)]="searchskill"
                autocomplete="off"
                (keydown.enter)="handleEnterKey($event)"
                (keydown.backspace)="handleEnterKey($event)"
                nz-input
                style="height: 32px"
                placeholder="Min 3 chars required."
              />
            </nz-input-group>
            <ng-template #suffixIconButton>
              <button
                nz-button
                nzType="primary"
                id="button"
                (click)="SearchPincode(searchskill)"
                style="height: 32px !important"
              >
                <i nz-icon nzType="search"></i>
              </button>
            </ng-template>
          </nz-form-item>
        </form>
      </div>
    </div>

    <form nz-form #teritorymaster="ngForm">
      <div nz-row>
        <div nz-col nzSpan="24">
          <div style="position: relative">
            <nz-table
              class="my-scroll no-wrap1"
              nzBordered
              #tableeeee
              [nzData]="unMapCategoriesData"
              (nzQueryParams)="sort($event)"
              [nzSize]="'small'"
              [nzFrontPagination]="false"
              style="white-space: pre-line"
              [nzLoading]="isSpinning11 || isLoading"
              [nzScroll]="{ y: '60vh' }"
            >
              <thead>
                <tr>
                  <th nzWidth="20px">
                    <label
                      (ngModelChange)="toggleAll($event)"
                      nz-checkbox
                      [(ngModel)]="allSelected"
                      name="allSelected"
                      [nzIndeterminate]="tableIndeterminate"
                      >All</label
                    >
                  </th>

                  <th
                    nzWidth="120px"
                    nzShowSort
                    [nzSortFn]="true"
                    nzColumnKey="{{ 'NAME' }}"
                  >
                    Area
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let data of tableeeee.data; let i = index">
                  <td style="text-align: center">
                    <label
                      nz-checkbox
                      [(ngModel)]="data.selected"
                      name="allSelecteddd{{ i }}"
                      (ngModelChange)="onPincodeSelecttable(data, $event)"
                    ></label>
                  </td>

                  <td align="left">
                    <span *ngIf="data['NAME'] != null">
                      <span
                        *ngIf="data['NAME'].length >= 45"
                        nz-popover
                        [nzPopoverContent]="data['NAME']"
                        nzPopoverPlacement="topLeft"
                      >
                        {{
                          data["NAME"] == null
                            ? "-"
                            : (data["NAME"] | slice : 0 : 45)
                        }}{{ data["NAME"].length > 45 ? "..." : "" }}
                      </span>
                      <span *ngIf="data['NAME'].length < 45">
                        {{
                          data["NAME"] == null
                            ? "-"
                            : (data["NAME"] | slice : 0 : 45)
                        }}
                        {{ data["NAME"].length > 45 ? "..." : "" }}
                      </span>
                    </span>
                    <span *ngIf="data['NAME'] == null">-</span>
                  </td>
                </tr>
              </tbody>
            </nz-table>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div
    nz-col
    nzLg="2"
    nzMd="24"
    nzSm="24"
    nzXs="24"
    style="align-self: center; text-align: center; align-items: center"
  >
    <div>
      <nz-spin [nzSpinning]="isSpinning">
        <span
          nz-icon
          nzType="right-circle"
          nz-tooltip
          nzTooltipTitle="No Areas selected"
          style="font-size: 26px !important"
          nzTheme="outline"
          *ngIf="selectedPincode.length == 0"
        ></span>
        <span
          nz-icon
          nzType="right-circle"
          nz-tooltip
          nzTooltipTitle="Click here to map Areas to User"
          style="font-size: 26px !important"
          nzTheme="fill"
          (click)="mapCities()"
          *ngIf="selectedPincode.length > 0"
        ></span>
      </nz-spin>
    </div>
  </div>
  <div nz-col nzLg="11" nzMd="24" nzSm="24" nzXs="24">
    <div nz-row style="display: flex; justify-content: space-between">
      <div nz-row class="header-controls" style="width: 100%">
        <div
          nz-col
          nzXl="12"
          nzLg="12"
          nzMd="12"
          nzSm="24"
          nzXs="24"
          class="status-and-switch-col"
        >
          <div nz-row nzJustify="start" nzAlign="middle" class="status-row">
            <div nz-col class="record-status-count">
              <span *ngIf="selectedPincode11.length > 0">
                {{ selectedPincode11.length }} records selected out of
                {{ totoalrecordsss }}</span
              >
              <span *ngIf="selectedPincode11.length == 0"
                >Total Records {{ totoalrecordsss }}</span
              >
            </div>

            <div nz-col class="select-all-switch" style="padding-left: 10px">
              <nz-switch
                name="allChange"
                nzCheckedChildren="Select All"
                nzUnCheckedChildren="Deselect All"
                (ngModelChange)="allChange($event)"
                [(ngModel)]="allChecked"
              ></nz-switch>
            </div>
          </div>
        </div>

        <div
          nz-col
          nzXl="12"
          nzLg="12"
          nzMd="12"
          nzSm="24"
          nzXs="24"
          class="search-col"
          style="text-align: right"
        >
          <form nz-form [nzLayout]="'inline'" style="display: inline-flex">
            <nz-form-item>
              <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton1">
                <input
                  type="text"
                  name="skillesearch"
                  [(ngModel)]="mapsearchskill"
                  autocomplete="off"
                  (keydown.enter)="handlepincodeEnterKey($event)"
                  (keydown.backspace)="handlepincodeEnterKey($event)"
                  nz-input
                  style="height: 32px"
                  placeholder="Min 3 chars required."
                />
              </nz-input-group>
              <ng-template #suffixIconButton1>
                <button
                  nz-button
                  nzType="primary"
                  id="button"
                  (click)="SearchSkill(mapsearchskill)"
                  style="height: 32px !important"
                >
                  <i nz-icon nzType="search"></i>
                </button>
              </ng-template>
            </nz-form-item>
          </form>
        </div>
      </div>

      <div nz-row>
        <div nz-col nzSpan="24">
          <div style="position: relative">
            <nz-table
              class="my-scroll no-wrap1"
              nzBordered
              #table
              [nzData]="mappingdata"
              (nzQueryParams)="sort11($event)"
              [nzSize]="'small'"
              [nzFrontPagination]="false"
              style="white-space: pre-line"
              [nzLoading]="isSpinning22"
              [nzScroll]="{ y: '60vh' }"
            >
              <thead>
                <tr>
                  <th
                    nzWidth="100px"
                    nzShowSort
                    [nzSortFn]="true"
                    nzColumnKey="{{ 'IS_MAPPED' }}"
                  >
                    Is Mapped ?
                  </th>

                  <th
                    nzWidth="160px"
                    nzShowSort
                    [nzSortFn]="true"
                    nzColumnKey="{{ 'AREA_NAME' }}"
                  >
                    Area
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let data of table.data; let i = index">
                  <td align="center" style="white-space: pre-line">
                    <nz-switch
                      name="IS_ACTIVE"
                      nzCheckedChildren="Yes"
                      nzUnCheckedChildren="No"
                      [(ngModel)]="data['IS_MAPPED']"
                      (ngModelChange)="onPincodeSelecttable11111(data, $event)"
                    ></nz-switch>
                  </td>
                  <td align="left">
                    <span *ngIf="data['AREA_NAME'] != null">
                      <span
                        *ngIf="data['AREA_NAME'].length >= 35"
                        nz-popover
                        [nzPopoverContent]="data['AREA_NAME']"
                        nzPopoverPlacement="topLeft"
                      >
                        {{
                          data["AREA_NAME"] == null
                            ? "-"
                            : (data["AREA_NAME"] | slice : 0 : 35)
                        }}{{ data["AREA_NAME"].length > 35 ? "..." : "" }}
                      </span>
                      <span *ngIf="data['AREA_NAME'].length < 35">
                        {{
                          data["AREA_NAME"] == null
                            ? "-"
                            : (data["AREA_NAME"] | slice : 0 : 35)
                        }}
                        {{ data["AREA_NAME"].length > 35 ? "..." : "" }}
                      </span>
                    </span>
                    <span *ngIf="data['AREA_NAME'] == null">-</span>
                  </td>
                </tr>
              </tbody>
            </nz-table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
