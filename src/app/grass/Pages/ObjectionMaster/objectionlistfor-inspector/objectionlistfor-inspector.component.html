<div nz-row nzType="flex" style="justify-content: space-between;">
    <div nz-col style="margin: 0 10px 0 0;">
        <div class="formname"> {{formTitle}}</div>
    </div>

    <div nz-col style="display: flex;justify-content: flex-end">
        <form nz-form [nzLayout]="'inline'">

            <nz-form-item>
                <button nz-button nzTooltipTitle="Filter" class="flexicons" nzTooltipPlacement="top" nz-tooltip [nzType]="isFilterApplied"
                    (click)="showFilter()">
                    <i nz-icon nzType="filter"></i>
                </button>
            </nz-form-item>

            <nz-form-item>
                <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
                    <input type="text" name="citysearch" (keyup)="keyup($event)" [(ngModel)]="searchText" nz-input
                        placeholder="Search " />
                </nz-input-group>
                <ng-template #suffixIconButton>
                    <button nz-button nzType="primary" (click)="search(true)" class="flexicons" nzSearch><i nz-icon
                            nzType="search"></i></button>
                </ng-template>
            </nz-form-item>
        </form>
    </div>
</div>

<div nz-row>
    <div nz-col nzSpan="24">
        <div class="filter {{ filterClass }}">
            <div class="filter-box">
                <form nz-form>
                    <div nz-row>

                        <div nz-col nzSpan="8">
                            <nz-form-item class="chsaaa">
                                <nz-form-label nzRequired nzNoColon>Residence Type</nz-form-label>
                                <nz-form-control>
                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Please Select Residence Type "
                                        name="Residence Type" [(ngModel)]="RESIDENCE_TYPE" >
                                        <nz-option *ngFor="let type of ResidenceType" [nzValue]="type.RESIDENCE_TYPE_ID"
                                            [nzLabel]="type.RESIDENCE_TYPE_NAME">
                                        </nz-option>
                                    </nz-select>
                                </nz-form-control>
                            </nz-form-item>
                        </div>

                        <div nz-col nzSpan="5">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>Select Month</nz-form-label>
                                <nz-date-picker nzMode="month" nzFormat="MMM" name="month" [(ngModel)]="monthh" required
                                    nzPlaceHolder="Select Month" style="width: 90%;"></nz-date-picker>
                            </nz-form-item>
                        </div>

                        <div nz-col nzSpan="8" style="display: flex;gap: 10px;margin-top: 31px;">
                            <button nz-button [nzLoading]="isSpinning" nzType="primary" class="flexicons" (click)="applyFilter()">
                                <i nz-icon nzType="filter"></i>Apply Filter
                            </button>
                            <button nz-button nzType="primary" class="flexicons" (click)="clearFilter()">
                                <i nz-icon nzType="filter"></i>Clear filter
                            </button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>

<div nz-row style="margin: 5px 0px;">
    <div nz-col nzSpan="24" style="display: flex;justify-content: center;">
        <nz-radio-group [(ngModel)]="Status" name="statuscheck" (ngModelChange)="changeRadioButton($event)"
            nzButtonStyle="solid">
            <label nz-radio-button nzValue="ALL"><span>All</span></label>
            <label nz-radio-button nzValue="P"><span>Pending</span></label>
            <label nz-radio-button nzValue="A"><span>Approved</span></label>
            <label nz-radio-button nzValue="R"><span>Rejected</span></label>
        </nz-radio-group>
    </div>
</div>

<div nz-row>
    <div nz-col nzSpan="24">
        <nz-table class="my-scroll no-wrap1" nzBordered #Citytable nzShowSizeChanger [nzFrontPagination]="false"
            [nzData]="dataList" [nzLoading]="loadingRecords" [nzSize]="'small'" [nzTotal]="totalRecords"
            [nzScroll]="{ y: '370px' }" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize"
            (nzPageIndexChange)="search()" (nzPageSizeChange)="search(true)" (nzQueryParams)="sort($event)">

            <thead>
                <tr>
                    <th nzWidth="50px" style="text-align: center; font-weight: bold;"> Action</th>
                    <th nzWidth="160px" style="text-align: center; font-weight: bold; "
                        nzColumnKey="{{'EMPLOYEE_NAME'}}" [nzSortFn]="true"> Employee Name</th>
                    <th nzWidth="250px" style="text-align: center; font-weight: bold; " nzColumnKey="{{'REASON'}}"
                        [nzSortFn]="true"> Reason</th>
                    <th nzWidth="120px" style="text-align: center; font-weight: bold; "
                        nzColumnKey="{{'RESIDENCE_TYPE_NAME'}}" [nzSortFn]="true"> Residence Type </th>
                    <th nzWidth="90px" style="text-align: center; font-weight: bold; "
                        nzColumnKey="{{'REQUEST_DATETIME'}}" [nzSortFn]="true"> Date </th>

                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of Citytable.data; let i = index">

                    <td style="text-align: center;">
                        <span nz-icon nzType="eye" (click)="edit(data)" style="color: #1890ff;cursor: pointer;"
                            nzTheme="outline"></span>
                    </td>
                    <td nzWidth="100px" style=" white-space: pre-line; text-align: center;"> {{data.EMPLOYEE_NAME}}</td>
                    <td nzWidth="100px" style=" white-space: pre-line; text-align: center;"> {{data.REASON}}</td>
                    <td nzWidth="100px" style=" white-space: pre-line; text-align: center;">
                        {{data.RESIDENCE_TYPE_NAME}}</td>
                    <td nzWidth="90px" style=" white-space: pre-line; text-align: center;"> {{data.REQUEST_DATETIME |
                        date:'dd/MM/yyyy'}} </td>

                </tr>
            </tbody>
        </nz-table>
    </div>
</div>

<nz-modal [(nzVisible)]="RejectRemark" nzTitle="Remark On Objection" nzCentered="true" nzOkText="Submit"
    nzCancelText="Close" [nzBodyStyle]="{'padding':'5px','font-family': 'Poppins'}" nzWidth="600px"
    (nzOnCancel)="CancleRemark()" (nzOnOk)="SubmitRemark()" nzMaskClosable="false">
    <ng-container *nzModalContent>

        <div style="padding: 5px;">
            <label style="font-weight: 500;display: block;padding-left: 10px;">Reason:</label>
            <textarea maxlength="512" placeHolder="Enter The Reason" style="width: 100%;height: 100%;"
                [(ngModel)]="objectiondata.REASON" name="REASON" [nzAutosize]="{ minRows: 3, maxRows: 3 }" nz-input
                disabled></textarea>
        </div>

        <div style="display: flex;justify-content:space-evenly;"
            *ngIf="objectiondata.ATTACHMENT1 != null || objectiondata.ATTACHMENT2 != null">

            <div style="padding: 5px;" *ngIf="objectiondata.ATTACHMENT1 != null">
                <label style="font-weight: 500;display: block;padding-left: 10px;">Upload Attachment:</label>
                <div *ngIf="objectiondata.ATTACHMENT1 != null"
                    style="overflow: hidden; font-size: 13px;display: block;width: 100%;color: #1890ff;padding-left: 5px;">
                    {{ objectiondata.ATTACHMENT1 }} &nbsp;&nbsp; <span nz-icon nzTooltipTitle="Preview"
                        nzTooltipPlacement="top" nz-tooltip nzType="eye" nzTheme="outline"
                        style="cursor: pointer;color: #1890ff;"
                        (click)="viewAssumptionAttached(objectiondata.ATTACHMENT1)"></span>&nbsp;&nbsp;
                </div>
            </div>

            <div style="padding: 5px;" *ngIf="objectiondata.ATTACHMENT2 != null">
                <label style="font-weight: 500;display: block;padding-left: 10px;">Upload Attachment:</label>
                <div *ngIf="objectiondata.ATTACHMENT2 != null"
                    style="overflow: hidden; font-size: 13px;display: block;width: 100%;color: #1890ff;padding-left: 5px;">
                    {{ objectiondata.ATTACHMENT2 }} &nbsp;&nbsp; <span nz-icon nzTooltipTitle="Preview"
                        nzTooltipPlacement="top" nz-tooltip nzType="eye" nzTheme="outline"
                        style="cursor: pointer;color: #1890ff;"
                        (click)="ATTACHMENT2send(objectiondata.ATTACHMENT2)"></span>&nbsp;&nbsp;
                </div>
            </div>

        </div>

        <div style="padding: 5px;">
            <label style="font-weight: 500;display: block;padding-left: 10px;">Remark:</label>
            <textarea required maxlength="512" placeHolder="Enter The Remark" style="width: 100%;height: 100%;"
                [(ngModel)]="objectiondata.REMARK" name="REMARK" [nzAutosize]="{ minRows: 3, maxRows: 3 }"
                nz-input></textarea>
        </div>

    </ng-container>
</nz-modal>

<nz-modal [nzWidth]="1200" [(nzVisible)]="AttachedpdfsVisible" nzMaskClosable="false" nzClosable="false"
    [nzContent]="Attachedpdfs" [nzTitle]="'PDFview'" (nzOnCancel)="AttachedpdfsCancel()"
    [nzFooter]="AttachedpdfsFooter">
    <ng-template #Attachedpdfs>

        <div *ngIf="view1==11" style="height: 600px; overflow: auto">
            <iframe [src]="ObjectionPDF" style="width:1150px; height:600px;"
                frameborder="0"></iframe>
        </div>
        <div *ngIf="view1==22" style="height: 600px; overflow: auto">
            <iframe [src]="ObjectionPDF" style="width:1150px; height:600px;"
                frameborder="0"></iframe>
        </div>
    </ng-template>
    <ng-template #AttachedpdfsFooter>
        <button nz-button nzType="default" (click)="AttachedpdfsCancel()">
            Close
        </button>
    </ng-template>
</nz-modal>