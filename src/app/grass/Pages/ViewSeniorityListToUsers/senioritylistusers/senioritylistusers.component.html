<div>
    <form nz-form #websitebannerPage="ngForm">
        <nz-spin [nzSpinning]="isSpinning">

            <div nz-row class="my-box">

                <div nz-col nzSpan="18">
                    <nz-form-item>
                        <nz-form-label nzRequired nzNoColon>Residence Type</nz-form-label>
                        <nz-form-control nzHasFeedback nzErrorTip="Please Select Residence Type">
                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Please Select Residence Type "
                                name="Residence Type" [(ngModel)]="RESIDENCE_TYPE" required>
                                <nz-option *ngFor="let type of ResidenceType" [nzValue]="type.RESIDENCE_TYPE"
                                    [nzLabel]="type.RESIDENCE_TYPE_NAME">
                                </nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col nzSpan="3">
                    <button nzType="primary" nz-button (click)="getviewSenioritylist()" class="ant-btn"
                        style="margin-right: 8px;margin-top: 32px;">
                        View Order
                    </button>
                </div>

                <div nz-col nzSpan="24" *ngIf="listview != null || listview != undefined">
                    <nz-table class="my-scroll no-wrap1" nzBordered #ResidenceMasterTable nzShowSizeChanger
                        [nzFrontPagination]="false" [nzData]="listview" [nzSize]="'small'">

                        <thead>
                            <tr>
                                <th style="text-align: center;font-weight: 500;">View</th>
                                <th style="text-align: center;font-weight: 500;">Seniority Order</th>
                                <th style="text-align: center;font-weight: 500;">Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of ResidenceMasterTable.data">
                                <td style="white-space: pre-line;text-align: center;">
                                    <span nz-icon nzTooltipTitle="Preview" nzTooltipPlacement="top" nz-tooltip
                                        nzType="eye" nzTheme="outline" style="cursor: pointer;color: #1890ff;"
                                        (click)="viewAssumptionPDF(data.FILE_URL)"></span>
                                </td>
                                <td style="white-space: pre-line;text-align: center;">{{ data.FILE_URL }}</td>
                                <td style="white-space: pre-line;text-align: center;">{{ data.CREATED_MODIFIED_DATE |
                                    date:'dd/MM/yyyy' }}</td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
            </div>
        </nz-spin>
    </form>

    <div class="footer">

        <button type="button" nz-button class="ant-btn" style="margin-right: 8px" (click)="raiseObjection()"
            *ngIf="ifstatusisA && listview.length > 0  && arrayofflat.length <= 0">
            <span>Raise Objection</span>
        </button>

        <button type="button" class="ant-btn ant-btn-primary" (click)="addpreference()" nz-button nz-dropdown
            *ngIf="listview.length > 0 && arrayofflat.length <= 0" [disabled]="countdowndisable">
            <span>Add Quarter Preferences</span>&nbsp; <span>{{timer}}</span>
        </button>

        <!-- <button type="button" class="ant-btn ant-btn-primary" (click)="addpreference()" nz-button nz-dropdown
            *ngIf="listview.length > 0 && arrayofflat.length <= 0" [disabled]="ObjectionDataList.length > 0 ">
            <span>Add Quarter Preferences</span>
        </button> -->

        <button type="button" class="ant-btn ant-btn-primary" (click)="addpreference()" nz-button nz-dropdown
            *ngIf="listview.length > 0 && arrayofflat.length > 0">
            <span>Quarter Preferences</span>
        </button>

    </div>

    <div class="header">
        <button type="button" nz-button (click)="close(websitebannerPage)" class="ant-btn" style="margin-right: 8px">
            <i nz-icon nzType="close" nzTheme="outline"></i>
        </button>
    </div>
</div>


<!-- <nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="600" [nzVisible]="drawerVisibleobj"
    [nzTitle]="drawerTitleObjection" (nzOnClose)="drawerCloseobj()" (nzKeyboard)="true">
    <ng-container *nzDrawerContent>
        <app-objectionhistory [drawerClose]="closeCallbackobj" [drawerVisible]="drawerVisibleobj"
            [data]="senddata"></app-objectionhistory>
    </ng-container>
</nz-drawer> -->


<nz-modal [nzWidth]="1200" [(nzVisible)]="printOrderModalVisible" nzMaskClosable="false" nzClosable="false"
    [nzContent]="printOrderModalContent" [nzTitle]="'Seniority Order PDFView'" (nzOnCancel)="printOrderModalCancel()"
    [nzFooter]="printOrderModalFooter">
    <ng-template #printOrderModalContent>
        <div style="height: 600px; overflow: auto">
            <iframe [src]="getchange" style="width:1150px; height:600px;" frameborder="0"></iframe>
        </div>
    </ng-template>
    <ng-template #printOrderModalFooter>
        <button nz-button nzType="default" (click)="printOrderModalCancel()">
            Close
        </button>
    </ng-template>
</nz-modal>

<nz-modal [(nzVisible)]="RejectRemark" nzTitle="Reason for Objection" nzCentered="true" nzOkText="Submit"
    nzCancelText="Close" [nzBodyStyle]="{'padding':'5px','font-family': 'Poppins'}" nzWidth="600px"
    (nzOnCancel)="CancleRemark()" (nzOnOk)="SubmitRemark()" nzMaskClosable="false">
    <ng-container *nzModalContent>

        <nz-spin [nzSpinning]="SpinningRejection">
            <div nz-row>

                <div nz-col nzSpan="24" style="padding: 5px;">
                    <nz-form-label nzRequired nzNoColon>Reason:</nz-form-label>
                    <nz-form-item>
                        <nz-form-control nzErrorTip="">
                            <textarea required maxlength="512" placeHolder="Enter The Reason"
                                style="width: 100%;height: 100%;" [(ngModel)]="objectiondata.REASON" name="REASON"
                                [nzAutosize]="{ minRows: 3, maxRows: 3 }" nz-input></textarea>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col nzSpan="12" style="padding: 5px;">
                    <nz-form-label nzNoColon>Upload Attachment 1:</nz-form-label>
                    <nz-form-item>
                        <nz-form-control nzHasFeedback nzErrorTip="PDF File is required" *ngIf="attachment1">
                            <button nz-button style="padding: 0px 10px; font-size: 12px"
                                (click)="Attachmentonepdf.click()">
                                Select File
                                <input #Attachmentonepdf name="ATTACHMENT1" [(ngModel)]="objectiondata.ATTACHMENT1"
                                    type="file" (change)="onFileATTACHMENT1($event)" style="display: none" required />
                            </button>
                        </nz-form-control>

                        <div *ngIf="objectiondata.ATTACHMENT1 != null"
                            style="overflow: hidden; font-size: 13px;display: block;width: 100%;color: #1890ff;padding-left: 5px;">
                            {{ objectiondata.ATTACHMENT1 }} &nbsp;&nbsp; <span nz-icon nzTooltipTitle="Preview"
                                nzTooltipPlacement="top" nz-tooltip nzType="eye" nzTheme="outline"
                                style="cursor: pointer;color: #1890ff;"
                                (click)="viewAssumptionAttached(objectiondata.ATTACHMENT1)"></span>&nbsp;&nbsp;
                            <span nz-icon nzType="delete" nzTheme="outline" nzTooltipTitle="Remove"
                                nzTooltipPlacement="top" nz-tooltip style="cursor: pointer;color: red;"
                                (click)="ATTACHMENT1clear()"></span>
                        </div>
                    </nz-form-item>
                </div>

                <div nz-col nzSpan="12" style="padding: 5px;">
                    <nz-form-label nzNoColon>Upload Attachment 2:</nz-form-label>
                    <nz-form-item>
                        <nz-form-control *ngIf="attachment2pdf">
                            <button nz-button style="padding: 0px 10px; font-size: 12px"
                                (click)="Attachmentupload2.click()">
                                Select File
                                <input #Attachmentupload2 name="ATTACHMENT2" [(ngModel)]="objectiondata.ATTACHMENT2"
                                    type="file" (change)="onFileAttachment2($event)" style="display: none" />
                            </button>
                        </nz-form-control>

                        <div *ngIf="objectiondata.ATTACHMENT2 != null"
                            style="overflow: hidden; font-size: 13px;display: block;width: 100%;color: #1890ff;padding-left: 5px;">
                            {{ objectiondata.ATTACHMENT2 }} &nbsp;&nbsp; <span nz-icon nzTooltipTitle="Preview"
                                nzTooltipPlacement="top" nz-tooltip nzType="eye" nzTheme="outline"
                                style="cursor: pointer;color: #1890ff;"
                                (click)="ATTACHMENT2send(objectiondata.ATTACHMENT2)"></span>&nbsp;&nbsp;
                            <span nz-icon nzType="delete" nzTheme="outline" nzTooltipTitle="Remove"
                                nzTooltipPlacement="top" nz-tooltip style="cursor: pointer;color: red;"
                                (click)="ATTACHMENT2clear()"></span>
                        </div>
                    </nz-form-item>
                </div>
            </div>

        </nz-spin>

    </ng-container>
</nz-modal>

<nz-modal [nzWidth]="1200" [(nzVisible)]="AttachedpdfsVisible" nzMaskClosable="false" nzClosable="false"
    [nzContent]="Attachedpdfs" [nzTitle]="'PDFview'" (nzOnCancel)="AttachedpdfsCancel()"
    [nzFooter]="AttachedpdfsFooter">
    <ng-template #Attachedpdfs>

        <div *ngIf="view1==11" style="height: 600px; overflow: auto">
            <iframe [src]="viewattachedpdf" style="width:1150px; height:600px;" frameborder="0"></iframe>
        </div>
        <div *ngIf="view1==22" style="height: 600px; overflow: auto">
            <iframe [src]="viewattachedpdf" style="width:1150px; height:600px;" frameborder="0"></iframe>
        </div>
    </ng-template>
    <ng-template #AttachedpdfsFooter>
        <button nz-button nzType="default" (click)="AttachedpdfsCancel()">
            Close
        </button>
    </ng-template>
</nz-modal>

<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="1200" [nzVisible]="flatAvailablevisible"
    [nzTitle]="flatAvailabletitle" (nzOnClose)="flatAvailableclose()" (nzKeyboard)="true">
    <ng-container *nzDrawerContent>
        <app-flatpreferenceaadd [drawerClose]="closecallflatavailable" [drawerVisible]="flatAvailablevisible"
            [seniortiylistdata]="seniortiylistdata12" [empDATA]="emppdata"></app-flatpreferenceaadd>
    </ng-container>
</nz-drawer>